{preload_replace:pr_this_index_limit="10"}

{layout="site/-layout"}

{exp:channel:entries
    channel="pages"
    limit="1"
    dynamic='no'
    url_title="promotions-index"
}

{if no_results}{redirect="404"}{/if}

{!-- Set entry id for better meta --}
{layout:set name="entry_id" value="{entry_id}"}
{layout:set name="title_suffix" value="Page {exp:nsm_utils:page_number limit="{pr_this_index_limit}"}"}

{!-- Additional Open Graph meta --}
{layout:set name="og_image" value="{cf_page_feature_image:revved_url:facebook-2x}"}
{layout:set name="og_image:height" value="{cf_page_feature_image:height:facebook-2x}"}
{layout:set name="og_image:width" value="{cf_page_feature_image:width:facebook-2x}"}

{embed='advertisements/-ad-placeholder'}

<h1>{title}</h1>

{embed="topics/-topic-types-nav" content_type="promotions"}

{cf_page_content}

{if cf_page_feature_image}
<img
    src="{cf_page_feature_image:revved_url:feature-1x}"
    width="{cf_page_feature_image:width:feature-1x}"
    height="{cf_page_feature_image:height:feature-1x}"
    srcset="{cf_page_feature_image:revved_url:feature-2x} 2x"
/>
{/if}

{embed='promotions/-entries' limit="{pr_this_index_limit}"}

{/exp:channel:entries}
