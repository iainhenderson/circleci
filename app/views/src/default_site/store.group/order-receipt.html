{layout='site/-layout'}

{exp:channel:entries
    channel="pages"
    limit="1"
    dynamic='no'
    url_title="store-order-receipt"
}

{if no_results}{redirect="404"}{/if}

{!-- Set entry id for better meta --}
{layout:set name="entry_id" value="{entry_id}"}

{!-- Additional Open Graph meta --}
{layout:set name="og_image" value="{cf_page_feature_image:revved_url:facebook-2x}"}
{layout:set name="og_image:height" value="{cf_page_feature_image:height:facebook-2x}"}
{layout:set name="og_image:width" value="{cf_page_feature_image:width:facebook-2x}"}

<h1>{title}</h1>

{cf_page_content}

{if cf_page_feature_image}
<img
    src="{cf_page_feature_image:revved_url:feature-1x}"
    width="{cf_page_feature_image:width:feature-1x}"
    height="{cf_page_feature_image:height:feature-1x}"
    srcset="{cf_page_feature_image:revved_url:feature-2x} 2x"
/>
{/if}

{exp:store:orders
    order_hash="{segment_3}"
}

{layout:set name="title_prefix" value="Order: {order_id}"}

<h2>Order: {order_id}</h2>

<pre>
    Order Id: {order_id}
    Order Date: {order_date}
    Order Status: {order_status} (last updated: {order_status_updated format='{DATE_W3C}'})
    Shipping Method: {shipping_method_name}
</pre>

{/exp:store:orders}
{/exp:channel:entries}
